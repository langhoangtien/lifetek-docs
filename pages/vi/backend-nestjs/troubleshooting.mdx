# Khắc phục sự cố

Trang này chứa các vấn đề thường gặp và giải pháp cho dự án.

---

[[toc]]

## Vấn đề khi chạy ứng dụng

### Một instance của EnvironmentVariablesValidator đã không vượt qua kiểm tra

Khi chạy ứng dụng, bạn có thể gặp phải lỗi tương tự như sau:

```bash
An instance of EnvironmentVariablesValidator has failed the validation:
- property NODE_ENV has failed the following constraints: isEnum
,An instance of EnvironmentVariablesValidator has failed the validation:
- property APP_LOG_SERVICE has failed the following constraints: isEnum

[Nest] 19929  - 07/20/2024, 12:24:53 PM     LOG [NestFactory] Starting Nest application...
[Nest] 19929  - 07/20/2024, 12:24:53 PM   ERROR [ExceptionHandler]
Error in NODE_ENV:
+ isEnum: NODE_ENV must be one of the following values: local, development, staging, production, test

Error in APP_LOG_SERVICE:
+ isEnum: APP_LOG_SERVICE must be one of the following values: console, google_logging, aws_cloudwatch

```

Lỗi này xảy ra khi các biến môi trường không được thiết lập đúng cách. Hãy đảm bảo rằng tệp `.env` được thiết lập đúng các biến môi trường yêu cầu. Bạn có thể sao chép tệp `.env.example` và đổi tên thành `.env `để thiết lập các biến môi trường.

### Không thể kết nối đến cơ sở dữ liệu. Đang thử lại

```bash
❯ pnpm start

> nestjs-boilerplate@0.0.1 start /Users/lamngockhuong/develop/projects/vndevteam/nestjs-boilerplate
> nest start

✔  TSC  Initializing type checker...
>  TSC  Found 0 issues.
>  SWC  Running...
Successfully compiled: 108 files with swc (77.67ms)
[Nest] 73686  - 07/31/2024, 7:25:23 AM     LOG [NestFactory] Starting Nest application...
[Nest] 73686  - 07/31/2024, 7:25:23 AM     LOG [InstanceLoader] AppModule dependencies initialized +2ms
[Nest] 73686  - 07/31/2024, 7:25:23 AM     LOG [InstanceLoader] ApiModule dependencies initialized +0ms
[Nest] 73686  - 07/31/2024, 7:25:23 AM     LOG [InstanceLoader] TypeOrmModule dependencies initialized +0ms
[Nest] 73686  - 07/31/2024, 7:25:23 AM     LOG [InstanceLoader] HttpModule dependencies initialized +0ms
[Nest] 73686  - 07/31/2024, 7:25:23 AM     LOG [InstanceLoader] JwtModule dependencies initialized +0ms
[Nest] 73686  - 07/31/2024, 7:25:23 AM     LOG [InstanceLoader] HomeModule dependencies initialized +0ms
[Nest] 73686  - 07/31/2024, 7:25:23 AM     LOG [InstanceLoader] ConfigHostModule dependencies initialized +0ms
[Nest] 73686  - 07/31/2024, 7:25:23 AM     LOG [InstanceLoader] TerminusModule dependencies initialized +0ms
[Nest] 73686  - 07/31/2024, 7:25:23 AM     LOG [InstanceLoader] ConfigModule dependencies initialized +0ms
[Nest] 73686  - 07/31/2024, 7:25:23 AM     LOG [InstanceLoader] ConfigModule dependencies initialized +0ms
[Nest] 73686  - 07/31/2024, 7:25:23 AM     LOG [InstanceLoader] PostModule dependencies initialized +0ms
[Nest] 73686  - 07/31/2024, 7:25:23 AM     LOG [InstanceLoader] HealthModule dependencies initialized +0ms
[Nest] 73686  - 07/31/2024, 7:25:23 AM     LOG [InstanceLoader] LoggerModule dependencies initialized +1ms
[Nest] 73686  - 07/31/2024, 7:25:23 AM   ERROR [TypeOrmModule] Unable to connect to the database. Retrying (1)...
AggregateError
    at __node_internal_ (node:internal/errors:174:15)
    at internalConnectMultiple (node:net:1114:18)
    at afterConnectMultiple (node:net:1667:5)
[Nest] 73686  - 07/31/2024, 7:25:23 AM     LOG [InstanceLoader] I18nModule dependencies initialized +0ms
[Nest] 73686  - 07/31/2024, 7:25:23 AM   ERROR [TypeOrmModule] Unable to connect to the database. Retrying (2)...
AggregateError
    at __node_internal_ (node:internal/errors:174:15)
    at internalConnectMultiple (node:net:1114:18)
    at afterConnectMultiple (node:net:1667:5)
...
```

Lỗi này xảy ra khi ứng dụng không thể kết nối đến cơ sở dữ liệu. Hãy đảm bảo rằng cơ sở dữ liệu đang chạy và các thông tin kết nối đã được thiết lập chính xác trong tệp `.env`.

---

Vui lòng tham khảo phần [Cấu hình](./development#configuration) để biết thêm thông tin về cách thiết lập các biến môi trường.
