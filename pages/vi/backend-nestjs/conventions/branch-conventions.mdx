# Quy ước nhánh

---

[[toc]]

## Các nhánh trong luồng công việc

Những nhánh này sẽ luôn có mặt trong kho lưu trữ và theo dòng thay đổi mã từ phát triển cho đến sản xuất.

- `develop` (dev): Tất cả các tính năng mới và sửa lỗi đều được đưa vào nhánh phát triển. Việc giải quyết xung đột mã giữa các lập trình viên nên được thực hiện ngay từ nhánh này.
- `staging` (stage): Chứa các tính năng đã được kiểm tra mà các bên liên quan muốn có sẵn, thường là để demo hoặc đề xuất trước khi nâng lên sản phẩm chính thức. Các quyết định về việc có đưa tính năng vào mã sản xuất hay không sẽ được đưa ra tại đây.
- `main` (master): Nhánh sản xuất, nếu kho lưu trữ được công bố, đây là nhánh mặc định sẽ được trình bày.

Ngoại trừ Hotfixes, chúng tôi muốn mã của mình tuân theo quy trình merge một chiều từ **development** ➯ **test** ➯ **staging** ➯ **production**.

## Quy tắc tên nhánh phải phù hợp với regex sau

```js
/^(feature|bugfix|hotfix|chore|release|merge)\.([a-zA-Z0-9-]+(\.[a-zA-Z0-9-]+)*)$/;
```

## Cấu trúc

```txt
<type>(.<ticket>?).<subject>
```

1. `"type"` phải là một trong các loại sau:

   - `feature`: thêm, thay đổi hoặc xóa một tính năng
   - `bugfix`: sửa lỗi
   - `hotfix`: thay đổi mã với giải pháp tạm thời và/hoặc không tuân thủ quy trình thông thường (thường vì lý do khẩn cấp)
   - `chore`: thay đổi mà không làm thay đổi logic hay mã kiểm thử
   - `release`: nhánh để đánh dấu phiên bản phát hành cụ thể
   - `merge`: nhánh tạm thời dùng để giải quyết xung đột merge, thường giữa nhánh phát triển mới nhất và một nhánh tính năng hoặc Hotfix

2. `"ticket"` (tùy chọn)

   Một số ticket (ví dụ: Jira, GitHub issue, v.v.)

   - nếu nhánh liên quan đến một ticket, số ticket phải được bao gồm trong tên nhánh
   - nếu nhánh không liên quan đến một ticket, tên nhánh phải chứa một mô tả ngắn gọn về nhiệm vụ

3. `"subject"`

   Mô tả ngắn gọn về thay đổi

   - sử dụng thể mệnh lệnh, hiện tại (ví dụ: dùng "add" thay vì "added" hoặc "adds")
   - không viết hoa chữ cái đầu tiên
   - không có dấu chấm (.) ở cuối

## Ví dụ

```bash
feature.jira-1234

feature.jira-1234.support-dark-theme

feature.1234.support-dark-theme

feature.1234.new

feature.1234.refactor

feature.1234.ut

feature.integrate-swagger
```

```bash
bugfix.jira-1234

bugfix.jira-1234.registration-form-not-working

bugfix.1234.registration-form-not-working

bugfix.registration-form-not-working
```

```bash
chore.jira-1234

chore.jira-1234.registration-form-not-working

chore.1234.registration-form-not-working

chore.registration-form-not-working
```

```bash
release.myapp-1.01.123
```

```bash
merge.dev.lombok-refactoring
```
